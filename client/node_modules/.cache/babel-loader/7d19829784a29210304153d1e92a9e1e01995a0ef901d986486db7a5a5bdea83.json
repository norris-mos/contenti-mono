{"ast":null,"code":"import _classCallCheck from \"/Users/maxoliverstapyltonnorris/H5P-Nodejs-library/packages/h5p-rest-example-client/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"/Users/maxoliverstapyltonnorris/H5P-Nodejs-library/packages/h5p-rest-example-client/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport _inherits from \"/Users/maxoliverstapyltonnorris/H5P-Nodejs-library/packages/h5p-rest-example-client/node_modules/@babel/runtime/helpers/esm/inherits.js\";\nimport _createSuper from \"/Users/maxoliverstapyltonnorris/H5P-Nodejs-library/packages/h5p-rest-example-client/node_modules/@babel/runtime/helpers/esm/createSuper.js\";\nimport * as React from 'react';\nimport { Component, createRef } from 'react';\nimport { defineElements } from '@lumieducation/h5p-webcomponents';\ndefineElements('h5p-player');\nvar H5PPlayerUI = /*#__PURE__*/function (_Component) {\n  _inherits(H5PPlayerUI, _Component);\n  var _super = _createSuper(H5PPlayerUI);\n  function H5PPlayerUI(props) {\n    var _this;\n    _classCallCheck(this, H5PPlayerUI);\n    _this = _super.call(this, props);\n    _this.loadContentCallbackWrapper = function (contentId) {\n      return _this.props.loadContentCallback(contentId);\n    };\n    _this.onInitialized = function (event) {\n      if (_this.props.onInitialized) {\n        _this.props.onInitialized(event.detail.contentId);\n      }\n    };\n    _this.onxAPIStatement = function (event) {\n      if (_this.props.onxAPIStatement) {\n        _this.props.onxAPIStatement(event.detail.statement, event.detail.context, event.detail.event);\n      }\n    };\n    _this.h5pPlayer = createRef();\n    return _this;\n  }\n  _createClass(H5PPlayerUI, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.registerEvents();\n      this.setServiceCallbacks();\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate() {\n      this.registerEvents();\n      this.setServiceCallbacks();\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      this.unregisterEvents();\n    }\n    /**\n     * The internal H5P instance object of the H5P content.\n     *\n     * Only available after the `initialized` event was fired. Important: This\n     * object is only partially typed and there are more properties and methods\n     * on it!\n     */\n  }, {\n    key: \"h5pInstance\",\n    get: function get() {\n      var _a;\n      return (_a = this.h5pPlayer.current) === null || _a === void 0 ? void 0 : _a.h5pInstance;\n    }\n    /**\n     * The global H5P object / namespace (normally accessible through \"H5P...\"\n     * or \"window.H5P\") of the content type. Depending on the embed type this\n     * can be an object from the internal iframe, so you can use it to break the\n     * barrier of the iframe and execute JavaScript inside the iframe.\n     *\n     * Only available after the `initialized` event was fired. Important: This\n     * object is only partially typed and there are more properties and methods\n     * on it!\n     */\n  }, {\n    key: \"h5pObject\",\n    get: function get() {\n      var _a;\n      return (_a = this.h5pPlayer.current) === null || _a === void 0 ? void 0 : _a.h5pObject;\n    }\n    /**\n     * Returns the copyright notice in HTML that you can insert somewhere to\n     * display it. Undefined if there is no copyright information.\n     */\n  }, {\n    key: \"getCopyrightHtml\",\n    value: function getCopyrightHtml() {\n      var _a, _b;\n      return (_b = (_a = this.h5pPlayer.current) === null || _a === void 0 ? void 0 : _a.getCopyrightHtml()) !== null && _b !== void 0 ? _b : '';\n    }\n  }, {\n    key: \"getSnapshotBeforeUpdate\",\n    value: function getSnapshotBeforeUpdate() {\n      // Should the old editor instance be destroyed, we unregister from it...\n      this.unregisterEvents();\n      return null;\n    }\n    /**\n     * @returns true if there is copyright information to be displayed.\n     */\n  }, {\n    key: \"hasCopyrightInformation\",\n    value: function hasCopyrightInformation() {\n      var _a;\n      return (_a = this.h5pPlayer.current) === null || _a === void 0 ? void 0 : _a.hasCopyrightInformation();\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return React.createElement(\"h5p-player\", {\n        ref: this.h5pPlayer,\n        \"content-id\": this.props.contentId\n      });\n    }\n    /**\n     * Displays the copyright notice in the regular H5P way.\n     */\n  }, {\n    key: \"showCopyright\",\n    value: function showCopyright() {\n      var _a;\n      (_a = this.h5pPlayer.current) === null || _a === void 0 ? void 0 : _a.showCopyright();\n    }\n    /**\n     * Asks the H5P content to resize itself inside the dimensions of the\n     * container.\n     *\n     * Has no effect until the H5P object has fully initialized.\n     */\n  }, {\n    key: \"resize\",\n    value: function resize() {\n      var _a;\n      (_a = this.h5pPlayer.current) === null || _a === void 0 ? void 0 : _a.resize();\n    }\n  }, {\n    key: \"registerEvents\",\n    value: function registerEvents() {\n      var _a, _b;\n      (_a = this.h5pPlayer.current) === null || _a === void 0 ? void 0 : _a.addEventListener('initialized', this.onInitialized);\n      if (this.props.onxAPIStatement) {\n        (_b = this.h5pPlayer.current) === null || _b === void 0 ? void 0 : _b.addEventListener('xAPI', this.onxAPIStatement);\n      }\n    }\n  }, {\n    key: \"setServiceCallbacks\",\n    value: function setServiceCallbacks() {\n      if (this.h5pPlayer.current) {\n        this.h5pPlayer.current.loadContentCallback = this.loadContentCallbackWrapper;\n      }\n    }\n  }, {\n    key: \"unregisterEvents\",\n    value: function unregisterEvents() {\n      var _a, _b;\n      (_a = this.h5pPlayer.current) === null || _a === void 0 ? void 0 : _a.removeEventListener('initialized', this.onInitialized);\n      if (this.props.onxAPIStatement) {\n        (_b = this.h5pPlayer.current) === null || _b === void 0 ? void 0 : _b.removeEventListener('xAPI', this.onxAPIStatement);\n      }\n    }\n  }]);\n  return H5PPlayerUI;\n}(Component);\nexport { H5PPlayerUI as default };","map":{"version":3,"names":["React","Component","createRef","defineElements","H5PPlayerUI","_Component","_inherits","_super","_createSuper","props","_this","_classCallCheck","call","loadContentCallbackWrapper","contentId","loadContentCallback","onInitialized","event","detail","onxAPIStatement","statement","context","h5pPlayer","_createClass","key","value","componentDidMount","registerEvents","setServiceCallbacks","componentDidUpdate","componentWillUnmount","unregisterEvents","get","_a","current","h5pInstance","h5pObject","getCopyrightHtml","_b","getSnapshotBeforeUpdate","hasCopyrightInformation","render","createElement","ref","showCopyright","resize","addEventListener","removeEventListener","default"],"sources":["/Users/maxoliverstapyltonnorris/H5P-Nodejs-library/packages/h5p-react/src/H5PPlayerUI.tsx"],"sourcesContent":["import * as React from 'react';\nimport { Component, createRef, ReactNode, RefObject } from 'react';\n\nimport {\n    defineElements,\n    H5PPlayerComponent,\n    IxAPIEvent,\n    IContext,\n    IH5PInstance,\n    IH5P\n} from '@lumieducation/h5p-webcomponents';\nimport type { IPlayerModel } from '@lumieducation/h5p-server';\n\ndefineElements('h5p-player');\n\ndeclare global {\n    namespace JSX {\n        interface IntrinsicElements {\n            'h5p-player': {\n                'content-id'?: string;\n                ref?: any;\n            };\n        }\n    }\n}\n\ninterface IH5PPlayerUIProps {\n    contentId: string;\n    loadContentCallback: (contentId: string) => Promise<IPlayerModel>;\n    onInitialized?: (contentId: string) => void;\n    onxAPIStatement?: (statement: any, context: any, event: IxAPIEvent) => void;\n}\n\nexport default class H5PPlayerUI extends Component<IH5PPlayerUIProps> {\n    constructor(props: IH5PPlayerUIProps) {\n        super(props);\n        this.h5pPlayer = createRef();\n    }\n\n    private h5pPlayer: RefObject<H5PPlayerComponent>;\n\n    public componentDidMount(): void {\n        this.registerEvents();\n        this.setServiceCallbacks();\n    }\n\n    public componentDidUpdate(): void {\n        this.registerEvents();\n        this.setServiceCallbacks();\n    }\n\n    public componentWillUnmount(): void {\n        this.unregisterEvents();\n    }\n\n    /**\n     * The internal H5P instance object of the H5P content.\n     *\n     * Only available after the `initialized` event was fired. Important: This\n     * object is only partially typed and there are more properties and methods\n     * on it!\n     */\n    public get h5pInstance(): IH5PInstance | undefined {\n        return this.h5pPlayer.current?.h5pInstance;\n    }\n\n    /**\n     * The global H5P object / namespace (normally accessible through \"H5P...\"\n     * or \"window.H5P\") of the content type. Depending on the embed type this\n     * can be an object from the internal iframe, so you can use it to break the\n     * barrier of the iframe and execute JavaScript inside the iframe.\n     *\n     * Only available after the `initialized` event was fired. Important: This\n     * object is only partially typed and there are more properties and methods\n     * on it!\n     */\n    public get h5pObject(): IH5P | undefined {\n        return this.h5pPlayer.current?.h5pObject;\n    }\n\n    /**\n     * Returns the copyright notice in HTML that you can insert somewhere to\n     * display it. Undefined if there is no copyright information.\n     */\n    public getCopyrightHtml(): string {\n        return this.h5pPlayer.current?.getCopyrightHtml() ?? '';\n    }\n\n    public getSnapshotBeforeUpdate(): void {\n        // Should the old editor instance be destroyed, we unregister from it...\n        this.unregisterEvents();\n        return null;\n    }\n\n    /**\n     * @returns true if there is copyright information to be displayed.\n     */\n    public hasCopyrightInformation(): boolean {\n        return this.h5pPlayer.current?.hasCopyrightInformation();\n    }\n\n    public render(): ReactNode {\n        return (\n            <h5p-player\n                ref={this.h5pPlayer}\n                content-id={this.props.contentId}\n            />\n        );\n    }\n\n    /**\n     * Displays the copyright notice in the regular H5P way.\n     */\n    public showCopyright(): void {\n        this.h5pPlayer.current?.showCopyright();\n    }\n\n    /**\n     * Asks the H5P content to resize itself inside the dimensions of the\n     * container.\n     *\n     * Has no effect until the H5P object has fully initialized.\n     */\n    public resize(): void {\n        this.h5pPlayer.current?.resize();\n    }\n\n    private loadContentCallbackWrapper = (\n        contentId: string\n    ): Promise<IPlayerModel> => this.props.loadContentCallback(contentId);\n\n    private onInitialized = (\n        event: CustomEvent<{ contentId: string }>\n    ): void => {\n        if (this.props.onInitialized) {\n            this.props.onInitialized(event.detail.contentId);\n        }\n    };\n\n    private onxAPIStatement = (\n        event: CustomEvent<{\n            context: IContext;\n            event: IxAPIEvent;\n            statement: any;\n        }>\n    ): void => {\n        if (this.props.onxAPIStatement) {\n            this.props.onxAPIStatement(\n                event.detail.statement,\n                event.detail.context,\n                event.detail.event\n            );\n        }\n    };\n\n    private registerEvents(): void {\n        this.h5pPlayer.current?.addEventListener(\n            'initialized',\n            this.onInitialized\n        );\n        if (this.props.onxAPIStatement) {\n            this.h5pPlayer.current?.addEventListener(\n                'xAPI',\n                this.onxAPIStatement\n            );\n        }\n    }\n\n    private setServiceCallbacks(): void {\n        if (this.h5pPlayer.current) {\n            this.h5pPlayer.current.loadContentCallback =\n                this.loadContentCallbackWrapper;\n        }\n    }\n\n    private unregisterEvents(): void {\n        this.h5pPlayer.current?.removeEventListener(\n            'initialized',\n            this.onInitialized\n        );\n        if (this.props.onxAPIStatement) {\n            this.h5pPlayer.current?.removeEventListener(\n                'xAPI',\n                this.onxAPIStatement\n            );\n        }\n    }\n}\n"],"mappings":";;;;AAAA,OAAO,KAAKA,KAAK,MAAM,OAAO;AAC9B,SAASC,SAAS,EAAEC,SAAS,QAA8B,OAAO;AAElE,SACIC,cAAc,QAMX,kCAAkC;AAGzCA,cAAc,CAAC,YAAY,CAAC;AAAC,IAoBRC,WAAY,0BAAAC,UAAA;EAAAC,SAAA,CAAAF,WAAA,EAAAC,UAAA;EAAA,IAAAE,MAAA,GAAAC,YAAA,CAAAJ,WAAA;EAC7B,SAAAA,YAAYK,KAAwB;IAAA,IAAAC,KAAA;IAAAC,eAAA,OAAAP,WAAA;IAChCM,KAAA,GAAAH,MAAA,CAAAK,IAAA,OAAMH,KAAK;IA4FPC,KAAA,CAAAG,0BAA0B,GAAG,UACjCC,SAAiB;MAAA,OACOJ,KAAA,CAAKD,KAAK,CAACM,mBAAmB,CAACD,SAAS,CAAC;IAAA;IAE7DJ,KAAA,CAAAM,aAAa,GAAG,UACpBC,KAAyC,EACnC;MACN,IAAIP,KAAA,CAAKD,KAAK,CAACO,aAAa,EAAE;QAC1BN,KAAA,CAAKD,KAAK,CAACO,aAAa,CAACC,KAAK,CAACC,MAAM,CAACJ,SAAS,CAAC;;IAExD,CAAC;IAEOJ,KAAA,CAAAS,eAAe,GAAG,UACtBF,KAIE,EACI;MACN,IAAIP,KAAA,CAAKD,KAAK,CAACU,eAAe,EAAE;QAC5BT,KAAA,CAAKD,KAAK,CAACU,eAAe,CACtBF,KAAK,CAACC,MAAM,CAACE,SAAS,EACtBH,KAAK,CAACC,MAAM,CAACG,OAAO,EACpBJ,KAAK,CAACC,MAAM,CAACD,KAAK,CACrB;;IAET,CAAC;IArHGP,KAAA,CAAKY,SAAS,GAAGpB,SAAS,EAAE;IAAC,OAAAQ,KAAA;EACjC;EAACa,YAAA,CAAAnB,WAAA;IAAAoB,GAAA;IAAAC,KAAA,EAIM,SAAAC,kBAAA,EAAiB;MACpB,IAAI,CAACC,cAAc,EAAE;MACrB,IAAI,CAACC,mBAAmB,EAAE;IAC9B;EAAC;IAAAJ,GAAA;IAAAC,KAAA,EAEM,SAAAI,mBAAA,EAAkB;MACrB,IAAI,CAACF,cAAc,EAAE;MACrB,IAAI,CAACC,mBAAmB,EAAE;IAC9B;EAAC;IAAAJ,GAAA;IAAAC,KAAA,EAEM,SAAAK,qBAAA,EAAoB;MACvB,IAAI,CAACC,gBAAgB,EAAE;IAC3B;IAEA;;;;;;;EAAA;IAAAP,GAAA;IAAAQ,GAAA,EAOA,SAAAA,IAAA,EAAsB;;MAClB,OAAO,CAAAC,EAAA,OAAI,CAACX,SAAS,CAACY,OAAO,cAAAD,EAAA,uBAAAA,EAAA,CAAEE,WAAW;IAC9C;IAEA;;;;;;;;;;EAAA;IAAAX,GAAA;IAAAQ,GAAA,EAUA,SAAAA,IAAA,EAAoB;;MAChB,OAAO,CAAAC,EAAA,OAAI,CAACX,SAAS,CAACY,OAAO,cAAAD,EAAA,uBAAAA,EAAA,CAAEG,SAAS;IAC5C;IAEA;;;;EAAA;IAAAZ,GAAA;IAAAC,KAAA,EAIO,SAAAY,iBAAA,EAAgB;;MACnB,OAAO,CAAAC,EAAA,IAAAL,EAAA,OAAI,CAACX,SAAS,CAACY,OAAO,cAAAD,EAAA,uBAAAA,EAAA,CAAEI,gBAAgB,EAAE,cAAAC,EAAA,cAAAA,EAAA,GAAI,EAAE;IAC3D;EAAC;IAAAd,GAAA;IAAAC,KAAA,EAEM,SAAAc,wBAAA,EAAuB;MAC1B;MACA,IAAI,CAACR,gBAAgB,EAAE;MACvB,OAAO,IAAI;IACf;IAEA;;;EAAA;IAAAP,GAAA;IAAAC,KAAA,EAGO,SAAAe,wBAAA,EAAuB;;MAC1B,OAAO,CAAAP,EAAA,OAAI,CAACX,SAAS,CAACY,OAAO,cAAAD,EAAA,uBAAAA,EAAA,CAAEO,uBAAuB,EAAE;IAC5D;EAAC;IAAAhB,GAAA;IAAAC,KAAA,EAEM,SAAAgB,OAAA,EAAM;MACT,OACIzC,KAAA,CAAA0C,aAAA;QACIC,GAAG,EAAE,IAAI,CAACrB,SAAS;QAAA,cACP,IAAI,CAACb,KAAK,CAACK;MAAS,EAClC;IAEV;IAEA;;;EAAA;IAAAU,GAAA;IAAAC,KAAA,EAGO,SAAAmB,cAAA,EAAa;;MAChB,CAAAX,EAAA,OAAI,CAACX,SAAS,CAACY,OAAO,cAAAD,EAAA,uBAAAA,EAAA,CAAEW,aAAa,EAAE;IAC3C;IAEA;;;;;;EAAA;IAAApB,GAAA;IAAAC,KAAA,EAMO,SAAAoB,OAAA,EAAM;;MACT,CAAAZ,EAAA,OAAI,CAACX,SAAS,CAACY,OAAO,cAAAD,EAAA,uBAAAA,EAAA,CAAEY,MAAM,EAAE;IACpC;EAAC;IAAArB,GAAA;IAAAC,KAAA,EA8BO,SAAAE,eAAA,EAAc;;MAClB,CAAAM,EAAA,OAAI,CAACX,SAAS,CAACY,OAAO,cAAAD,EAAA,uBAAAA,EAAA,CAAEa,gBAAgB,CACpC,aAAa,EACb,IAAI,CAAC9B,aAAa,CACrB;MACD,IAAI,IAAI,CAACP,KAAK,CAACU,eAAe,EAAE;QAC5B,CAAAmB,EAAA,OAAI,CAAChB,SAAS,CAACY,OAAO,cAAAI,EAAA,uBAAAA,EAAA,CAAEQ,gBAAgB,CACpC,MAAM,EACN,IAAI,CAAC3B,eAAe,CACvB;;IAET;EAAC;IAAAK,GAAA;IAAAC,KAAA,EAEO,SAAAG,oBAAA,EAAmB;MACvB,IAAI,IAAI,CAACN,SAAS,CAACY,OAAO,EAAE;QACxB,IAAI,CAACZ,SAAS,CAACY,OAAO,CAACnB,mBAAmB,GACtC,IAAI,CAACF,0BAA0B;;IAE3C;EAAC;IAAAW,GAAA;IAAAC,KAAA,EAEO,SAAAM,iBAAA,EAAgB;;MACpB,CAAAE,EAAA,OAAI,CAACX,SAAS,CAACY,OAAO,cAAAD,EAAA,uBAAAA,EAAA,CAAEc,mBAAmB,CACvC,aAAa,EACb,IAAI,CAAC/B,aAAa,CACrB;MACD,IAAI,IAAI,CAACP,KAAK,CAACU,eAAe,EAAE;QAC5B,CAAAmB,EAAA,OAAI,CAAChB,SAAS,CAACY,OAAO,cAAAI,EAAA,uBAAAA,EAAA,CAAES,mBAAmB,CACvC,MAAM,EACN,IAAI,CAAC5B,eAAe,CACvB;;IAET;EAAC;EAAA,OAAAf,WAAA;AAAA,EAzJoCH,SAA4B;AAAA,SAAhDG,WAAY,IAAA4C,OAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}