{"ast":null,"code":"import _toConsumableArray from\"/Users/maxoliverstapyltonnorris/H5P-Nodejs-library/packages/h5p-rest-example-client/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _regeneratorRuntime from\"/Users/maxoliverstapyltonnorris/H5P-Nodejs-library/packages/h5p-rest-example-client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/maxoliverstapyltonnorris/H5P-Nodejs-library/packages/h5p-rest-example-client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _classCallCheck from\"/Users/maxoliverstapyltonnorris/H5P-Nodejs-library/packages/h5p-rest-example-client/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/Users/maxoliverstapyltonnorris/H5P-Nodejs-library/packages/h5p-rest-example-client/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _inherits from\"/Users/maxoliverstapyltonnorris/H5P-Nodejs-library/packages/h5p-rest-example-client/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"/Users/maxoliverstapyltonnorris/H5P-Nodejs-library/packages/h5p-rest-example-client/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import React from'react';import Button from'react-bootstrap/Button';import ListGroup from'react-bootstrap/ListGroup';import{FontAwesomeIcon}from'@fortawesome/react-fontawesome';import{faPlusCircle}from'@fortawesome/free-solid-svg-icons';// The .js references are necessary for requireJs to work in the browser.\nimport ContentListEntryComponent from'./ContentListEntryComponent';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var ContentList=/*#__PURE__*/function(_React$Component){_inherits(ContentList,_React$Component);var _super=_createSuper(ContentList);function ContentList(props){var _this;_classCallCheck(this,ContentList);_this=_super.call(this,props);_this.state=void 0;_this.contentService=void 0;/**\n     * Keeps track of newly created content to assign a key\n     * @memberof ContentList\n     */_this.newCounter=0;_this.state={contentList:[]};_this.contentService=props.contentService;return _this;}_createClass(ContentList,[{key:\"componentDidMount\",value:function(){var _componentDidMount=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return this.updateList();case 2:case\"end\":return _context.stop();}},_callee,this);}));function componentDidMount(){return _componentDidMount.apply(this,arguments);}return componentDidMount;}()},{key:\"render\",value:function render(){var _this2=this;return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(Button,{variant:\"primary\",onClick:function onClick(){return _this2.new();},className:\"my-2\",children:[/*#__PURE__*/_jsx(FontAwesomeIcon,{icon:faPlusCircle,className:\"me-2\"}),\"Create new content\"]}),/*#__PURE__*/_jsx(ListGroup,{children:this.state.contentList.map(function(content){var _content$originalNewK;return/*#__PURE__*/_jsx(ContentListEntryComponent,{contentService:_this2.contentService,data:content,onDiscard:function onDiscard(){return _this2.onDiscard(content);},onDelete:function onDelete(){return _this2.onDelete(content);},onSaved:function onSaved(newData){return _this2.onSaved(content,newData);},generateDownloadLink:_this2.contentService.generateDownloadLink},(_content$originalNewK=content.originalNewKey)!==null&&_content$originalNewK!==void 0?_content$originalNewK:content.contentId);})})]});}},{key:\"updateList\",value:function(){var _updateList=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){var contentList;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:_context2.next=2;return this.contentService.list();case 2:contentList=_context2.sent;this.setState({contentList:contentList});case 4:case\"end\":return _context2.stop();}},_callee2,this);}));function updateList(){return _updateList.apply(this,arguments);}return updateList;}()},{key:\"new\",value:function _new(){this.setState({contentList:[{contentId:'new',mainLibrary:undefined,title:'New H5P',originalNewKey:\"new-\".concat(this.newCounter++)}].concat(_toConsumableArray(this.state.contentList))});}},{key:\"onDiscard\",value:function onDiscard(content){this.setState({contentList:this.state.contentList.filter(function(c){return c!==content;})});}},{key:\"onDelete\",value:function(){var _onDelete=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(content){return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1)switch(_context3.prev=_context3.next){case 0:if(content.contentId){_context3.next=2;break;}return _context3.abrupt(\"return\");case 2:_context3.prev=2;_context3.next=5;return this.contentService.delete(content.contentId);case 5:this.setState({contentList:this.state.contentList.filter(function(c){return c!==content;})});_context3.next=11;break;case 8:_context3.prev=8;_context3.t0=_context3[\"catch\"](2);if(_context3.t0 instanceof Error){console.error(_context3.t0.message);}case 11:case\"end\":return _context3.stop();}},_callee3,this,[[2,8]]);}));function onDelete(_x){return _onDelete.apply(this,arguments);}return onDelete;}()},{key:\"onSaved\",value:function(){var _onSaved=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee4(oldData,newData){return _regeneratorRuntime().wrap(function _callee4$(_context4){while(1)switch(_context4.prev=_context4.next){case 0:this.setState({contentList:this.state.contentList.map(function(c){return c===oldData?newData:c;})});case 1:case\"end\":return _context4.stop();}},_callee4,this);}));function onSaved(_x2,_x3){return _onSaved.apply(this,arguments);}return onSaved;}()}]);return ContentList;}(React.Component);export{ContentList as default};","map":{"version":3,"names":["React","Button","ListGroup","FontAwesomeIcon","faPlusCircle","ContentListEntryComponent","jsx","_jsx","jsxs","_jsxs","ContentList","_React$Component","_inherits","_super","_createSuper","props","_this","_classCallCheck","call","state","contentService","newCounter","contentList","_createClass","key","value","_componentDidMount","_asyncToGenerator","_regeneratorRuntime","mark","_callee","wrap","_callee$","_context","prev","next","updateList","stop","componentDidMount","apply","arguments","render","_this2","children","variant","onClick","new","className","icon","map","content","_content$originalNewK","data","onDiscard","onDelete","onSaved","newData","generateDownloadLink","originalNewKey","contentId","_updateList","_callee2","_callee2$","_context2","list","sent","setState","_new","mainLibrary","undefined","title","concat","_toConsumableArray","filter","c","_onDelete","_callee3","_callee3$","_context3","abrupt","delete","t0","Error","console","error","message","_x","_onSaved","_callee4","oldData","_callee4$","_context4","_x2","_x3","Component","default"],"sources":["/Users/maxoliverstapyltonnorris/H5P-Nodejs-library/packages/h5p-rest-example-client/src/components/ContentListComponent.tsx"],"sourcesContent":["import React from 'react';\nimport Button from 'react-bootstrap/Button';\nimport ListGroup from 'react-bootstrap/ListGroup';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faPlusCircle } from '@fortawesome/free-solid-svg-icons';\n\n// The .js references are necessary for requireJs to work in the browser.\nimport { IContentService, IContentListEntry } from '../services/ContentService';\nimport ContentListEntryComponent from './ContentListEntryComponent';\n\nexport default class ContentList extends React.Component<{\n    contentService: IContentService;\n}> {\n    constructor(props: { contentService: IContentService }) {\n        super(props);\n\n        this.state = { contentList: [] };\n        this.contentService = props.contentService;\n    }\n\n    public state: {\n        contentList: IContentListEntry[];\n    };\n\n    protected contentService: IContentService;\n    /**\n     * Keeps track of newly created content to assign a key\n     * @memberof ContentList\n     */\n    protected newCounter = 0;\n\n    public async componentDidMount(): Promise<void> {\n        await this.updateList();\n    }\n\n    public render(): React.ReactNode {\n        return (\n            <div>\n                <Button\n                    variant=\"primary\"\n                    onClick={() => this.new()}\n                    className=\"my-2\"\n                >\n                    <FontAwesomeIcon icon={faPlusCircle} className=\"me-2\" />\n                    Create new content\n                </Button>\n                <ListGroup>\n                    {this.state.contentList.map((content) => (\n                        <ContentListEntryComponent\n                            contentService={this.contentService}\n                            data={content}\n                            key={content.originalNewKey ?? content.contentId}\n                            onDiscard={() => this.onDiscard(content)}\n                            onDelete={() => this.onDelete(content)}\n                            onSaved={(newData) =>\n                                this.onSaved(content, newData)\n                            }\n                            generateDownloadLink={\n                                this.contentService.generateDownloadLink\n                            }\n                        ></ContentListEntryComponent>\n                    ))}\n                </ListGroup>\n            </div>\n        );\n    }\n\n    protected async updateList(): Promise<void> {\n        const contentList = await this.contentService.list();\n        this.setState({ contentList });\n    }\n\n    protected new() {\n        this.setState({\n            contentList: [\n                {\n                    contentId: 'new',\n                    mainLibrary: undefined,\n                    title: 'New H5P',\n                    originalNewKey: `new-${this.newCounter++}`\n                },\n                ...this.state.contentList\n            ]\n        });\n    }\n\n    protected onDiscard(content) {\n        this.setState({\n            contentList: this.state.contentList.filter((c) => c !== content)\n        });\n    }\n\n    protected async onDelete(content: IContentListEntry) {\n        if (!content.contentId) {\n            return;\n        }\n        try {\n            await this.contentService.delete(content.contentId);\n            this.setState({\n                contentList: this.state.contentList.filter((c) => c !== content)\n            });\n        } catch (error) {\n            if (error instanceof Error) {\n                console.error(error.message);\n            }\n        }\n    }\n\n    protected async onSaved(\n        oldData: IContentListEntry,\n        newData: IContentListEntry\n    ) {\n        this.setState({\n            contentList: this.state.contentList.map((c) =>\n                c === oldData ? newData : c\n            )\n        });\n    }\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}