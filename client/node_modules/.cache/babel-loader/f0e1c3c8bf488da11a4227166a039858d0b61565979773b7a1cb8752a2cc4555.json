{"ast":null,"code":"var _jsxFileName = \"/Users/maxoliverstapyltonnorris/H5P-Nodejs-library/packages/h5p-rest-example-client/src/components/Login.tsx\";\nimport React from 'react';\nimport Alert from 'react-bootstrap/Alert';\nimport { Button, Col, Dropdown, Row } from 'react-bootstrap';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default class Login extends React.Component {\n  constructor(props) {\n    super(props);\n    this.login = username => {\n      fetch('/login', {\n        method: 'POST',\n        headers: {\n          Accept: 'application/json, text/plain, */*',\n          'Content-type': 'application/json'\n        },\n        body: JSON.stringify({\n          username: username,\n          password: username\n        })\n      }).then(async res => {\n        if (res.status === 200) {\n          const loginData = await res.json();\n          this.setState({\n            ...this.state,\n            loginData,\n            loginMessage: undefined\n          });\n          if (loginData.csrfToken) {\n            this.props.contentService.setCsrfToken(loginData.csrfToken);\n          }\n        } else {\n          this.setState({\n            ...this.state,\n            loginData: undefined,\n            loginMessage: await res.text()\n          });\n          this.props.contentService.setCsrfToken(undefined);\n        }\n      }).catch(reason => {\n        this.setState({\n          ...this.state,\n          loginData: undefined,\n          loginMessage: reason\n        });\n        this.props.contentService.setCsrfToken(undefined);\n      });\n    };\n    this.logout = () => {\n      var _this$props$contentSe;\n      fetch('/logout', {\n        method: 'POST',\n        headers: {\n          Accept: 'application/json, text/plain, */*',\n          'Content-type': 'application/json',\n          'CSRF-Token': (_this$props$contentSe = this.props.contentService.getCsrfToken()) !== null && _this$props$contentSe !== void 0 ? _this$props$contentSe : ''\n        },\n        body: JSON.stringify({})\n      }).then(() => {\n        this.setState({\n          ...this.state,\n          loginData: undefined,\n          loginMessage: undefined\n        });\n        this.props.contentService.setCsrfToken(undefined);\n      }).catch(reason => {\n        this.setState({\n          ...this.state,\n          loginData: undefined,\n          loginMessage: `Error logging out: ${reason}`\n        });\n        this.props.contentService.setCsrfToken(undefined);\n      });\n    };\n    this.state = {};\n  }\n  render() {\n    return /*#__PURE__*/_jsxDEV(React.Fragment, {\n      children: [!this.state.loginData ? /*#__PURE__*/_jsxDEV(Dropdown, {\n        children: [/*#__PURE__*/_jsxDEV(Dropdown.Toggle, {\n          variant: \"success\",\n          id: \"dropdown-basic\",\n          children: \"Login as\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 101,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(Dropdown.Menu, {\n          children: [/*#__PURE__*/_jsxDEV(Dropdown.Item, {\n            onClick: () => this.login('teacher1'),\n            children: \"Teacher 1\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 105,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(Dropdown.Item, {\n            onClick: () => this.login('teacher2'),\n            children: \"Teacher 2\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 110,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(Dropdown.Item, {\n            onClick: () => this.login('student1'),\n            children: \"Student 1\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 115,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(Dropdown.Item, {\n            onClick: () => this.login('student2'),\n            children: \"Student 2\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 120,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 104,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 21\n      }, this) : /*#__PURE__*/_jsxDEV(Row, {\n        className: \"align-items-center\",\n        children: [/*#__PURE__*/_jsxDEV(Col, {\n          children: this.state.loginData.name\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 129,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(Col, {\n          children: /*#__PURE__*/_jsxDEV(Button, {\n            onClick: this.logout,\n            children: \"Logout\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 131,\n            columnNumber: 29\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 130,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 128,\n        columnNumber: 21\n      }, this), this.state.loginMessage && /*#__PURE__*/_jsxDEV(Alert, {\n        variant: \"error\",\n        children: this.state.loginMessage\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 136,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 13\n    }, this);\n  }\n}","map":{"version":3,"names":["React","Alert","Button","Col","Dropdown","Row","jsxDEV","_jsxDEV","Login","Component","constructor","props","login","username","fetch","method","headers","Accept","body","JSON","stringify","password","then","res","status","loginData","json","setState","state","loginMessage","undefined","csrfToken","contentService","setCsrfToken","text","catch","reason","logout","_this$props$contentSe","getCsrfToken","render","Fragment","children","Toggle","variant","id","fileName","_jsxFileName","lineNumber","columnNumber","Menu","Item","onClick","className","name"],"sources":["/Users/maxoliverstapyltonnorris/H5P-Nodejs-library/packages/h5p-rest-example-client/src/components/Login.tsx"],"sourcesContent":["import React from 'react';\nimport Alert from 'react-bootstrap/Alert';\nimport { Button, Col, Dropdown, Row } from 'react-bootstrap';\n\nimport { ContentService } from '../services/ContentService';\n\nexport default class Login extends React.Component<\n    { contentService: ContentService },\n    {\n        loginData?: {\n            username: string;\n            name: string;\n            email: string;\n            csrfToken: string;\n        };\n        loginMessage?: string;\n    }\n> {\n    constructor(props) {\n        super(props);\n        this.state = {};\n    }\n\n    private login = (username) => {\n        fetch('/login', {\n            method: 'POST',\n            headers: {\n                Accept: 'application/json, text/plain, */*',\n                'Content-type': 'application/json'\n            },\n            body: JSON.stringify({\n                username: username,\n                password: username\n            })\n        })\n            .then(async (res) => {\n                if (res.status === 200) {\n                    const loginData = await res.json();\n                    this.setState({\n                        ...this.state,\n                        loginData,\n                        loginMessage: undefined\n                    });\n                    if (loginData.csrfToken) {\n                        this.props.contentService.setCsrfToken(\n                            loginData.csrfToken\n                        );\n                    }\n                } else {\n                    this.setState({\n                        ...this.state,\n                        loginData: undefined,\n                        loginMessage: await res.text()\n                    });\n                    this.props.contentService.setCsrfToken(undefined);\n                }\n            })\n            .catch((reason) => {\n                this.setState({\n                    ...this.state,\n                    loginData: undefined,\n                    loginMessage: reason\n                });\n                this.props.contentService.setCsrfToken(undefined);\n            });\n    };\n\n    logout = () => {\n        fetch('/logout', {\n            method: 'POST',\n            headers: {\n                Accept: 'application/json, text/plain, */*',\n                'Content-type': 'application/json',\n                'CSRF-Token': this.props.contentService.getCsrfToken() ?? ''\n            },\n            body: JSON.stringify({})\n        })\n            .then(() => {\n                this.setState({\n                    ...this.state,\n                    loginData: undefined,\n                    loginMessage: undefined\n                });\n                this.props.contentService.setCsrfToken(undefined);\n            })\n            .catch((reason) => {\n                this.setState({\n                    ...this.state,\n                    loginData: undefined,\n                    loginMessage: `Error logging out: ${reason}`\n                });\n                this.props.contentService.setCsrfToken(undefined);\n            });\n    };\n\n    render() {\n        return (\n            <React.Fragment>\n                {!this.state.loginData ? (\n                    <Dropdown>\n                        <Dropdown.Toggle variant=\"success\" id=\"dropdown-basic\">\n                            Login as\n                        </Dropdown.Toggle>\n                        <Dropdown.Menu>\n                            <Dropdown.Item\n                                onClick={() => this.login('teacher1')}\n                            >\n                                Teacher 1\n                            </Dropdown.Item>\n                            <Dropdown.Item\n                                onClick={() => this.login('teacher2')}\n                            >\n                                Teacher 2\n                            </Dropdown.Item>\n                            <Dropdown.Item\n                                onClick={() => this.login('student1')}\n                            >\n                                Student 1\n                            </Dropdown.Item>\n                            <Dropdown.Item\n                                onClick={() => this.login('student2')}\n                            >\n                                Student 2\n                            </Dropdown.Item>\n                        </Dropdown.Menu>\n                    </Dropdown>\n                ) : (\n                    <Row className=\"align-items-center\">\n                        <Col>{this.state.loginData.name}</Col>\n                        <Col>\n                            <Button onClick={this.logout}>Logout</Button>\n                        </Col>\n                    </Row>\n                )}\n                {this.state.loginMessage && (\n                    <Alert variant=\"error\">{this.state.loginMessage}</Alert>\n                )}\n            </React.Fragment>\n        );\n    }\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}